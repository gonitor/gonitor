notifications:
  email:
    on_success: never
    on_failure: always

sudo: required

services:
  - docker

language: go
go:
  - "1.10"

install:
  - go get -u github.com/golang/dep/cmd/dep
  - dep ensure

script:
 - sh coverage.sh

after_success:
  - bash <(curl -s https://codecov.io/bash)
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker build -t gonitor/gonitor:0.0.0-preview .
  - docker push gonitor/gonitor:0.0.0-preview